<!DOCTYPE html>
<html>
  <head>
    <title>Ceagle-I: CI from Eagle Eye</title>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" title="no title" charset="utf-8">
  </head>
  <body>
    <div id="container">
      <div class="box size12" data-jobid="1"></div>
      <div class="box size11" data-jobid="2"></div>
      <div class="box size12" data-jobid="3"></div>
      <div class="box size61" data-jobid="2"></div>
      <div class="box size22" data-jobid="1"></div>
    </div>
    <script src="js/jquery-2.0.3.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jquery.nested.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
    $(function(){
      $("#container").nested();
      if (typeof(Worker) === 'undefined') {
        throw 'Sorry, No Worker Support for your browser. Please use the latest version of Chrome or Firefox or Safari'
      }
      
      monitor = new Worker('js/ci.monitor.js');
      
      monitor.onmessage = function(event) {
        $.each(event.data, function(index, value) {
          $('div[data-jobid="'+value.id+'"]').removeClass('success failed').addClass(value.state);
        });
      };
      
      $.getJSON('sample-job.json', function(data) {
        monitor.postMessage(data);
      });
    });
    </script>
  </body>
</html> 